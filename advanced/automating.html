
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Automating software containers &#8212; Software containers in neurosciene research</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'advanced/automating';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Code of Conduct" href="../CoC.html" />
    <link rel="prev" title="Creating your own software container" href="creating_your_own.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Software containers in neurosciene research</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome!
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../dei.html">Diversity, Equity and Inclusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Workshop overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Setup for the workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../outline.html">Outline</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../prerequisites.html">Course prerequisites</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../prerequisites/intro_to_shell.html">Prerequisite - the (unix) command line: bash</a></li>









</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction - Container &amp; Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/quickstart.html">Quickstarting your container expertise</a></li>
<li class="toctree-l1"><a class="reference internal" href="management.html">Management of software containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating.html">Creating software containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Software containers &amp; data</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_your_own.html">Creating your own software container</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Automating software containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CoC.html">Code of Conduct</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/M-earnest/docker_workshop" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/M-earnest/docker_workshop/edit/main/workshop/advanced/automating.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/M-earnest/docker_workshop/issues/new?title=Issue%20on%20page%20%2Fadvanced/automating.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/advanced/automating.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Automating software containers</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#automating-builds-using-github">Automating builds using Github</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">1. Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-a-dockerhub-access-token">2. Generate a DockerHub access token</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-github-secrets">3. Setup GitHub secrets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-the-github-workflow">4. Setup the Github workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-your-github-action-settings">5. Check your GitHub action settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#start-the-actions-workflow">6. Start the actions workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#celebrate">7. Celebrate</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="automating-software-containers">
<h1>Automating software containers<a class="headerlink" href="#automating-software-containers" title="Link to this heading">#</a></h1>
<p>If you have an project that is in development or you created a programm that will be maintained for the forseeable future, it can beconme tedious to constantly re-build your Docker Containers locally. Fortunately, there is a way to automate this process using GitHub, more specifically <a class="reference external" href="https://docs.github.com/en/actions/using-workflows/about-workflows">GitHub Workflows</a>. The following is going to discuss how to setup a project repository, how to add the relevant workflow and how to update your container with a simple push.</p>
<p>This will not only make your life easier, but integrate Docker in reproducible, in terms of version-controlled, scientific practice. The actual goal of this workshop, no?</p>
<section id="automating-builds-using-github">
<h2>Automating builds using Github<a class="headerlink" href="#automating-builds-using-github" title="Link to this heading">#</a></h2>
<p>GitHub workflows allow Users to define processes that automatically run when certain actions (push, pull, commits etc.) are performed on a repository. This has many application such as automatically building apps or e.g. creating and updating this website. We will make use of GitHub workflows to automatically generate and update Docker images and push them to DockerHub. A GitHub workflow is specified in a YAML file (.yml), like the one you’ll find under point <a class="reference external" href="https://m-earnest.github.io/docker_workshop/advanced/automating.html#setup-the-github-workflow">4.</a>, which will have to be included in the <code class="docutils literal notranslate"><span class="pre">.github/workflows</span></code> directory in a repository.</p>
<p>Find more info on GitHub workflows in the <a class="reference external" href="https://docs.github.com/en/actions/using-workflows">official documentation</a>.</p>
</section>
<section id="setup">
<h2>1. Setup<a class="headerlink" href="#setup" title="Link to this heading">#</a></h2>
<p>The setup is simple and straightforward, as we just need to create a new GitHub repository in which we store our Dockerfiles plus all of the files necessary to build your docker image, i.e. we recreate the local build context in a GitHub repository:</p>
<ul class="simple">
<li><p>create a new Github repository called docker_workshop (or substitute your project name)</p></li>
<li><p>add your Dockerfile and all the neceessary files to build your image to this repository (alternatively download the contents from our <a class="reference external" href="https://github.com/M-earnest/docker_workshop/tree/main/workshop/examples">examples folder</a> and upload the files to your repository)</p></li>
</ul>
<p>So far, so simple, but to automate the build process we’ll need to add a few things to our repository!</p>
</section>
<section id="generate-a-dockerhub-access-token">
<h2>2. Generate a DockerHub access token<a class="headerlink" href="#generate-a-dockerhub-access-token" title="Link to this heading">#</a></h2>
<p>Next, we need a Docker access token, this is necessary so that the GitHub workflow can push data to our DockerHub registry.</p>
<ul class="simple">
<li><p>head to <a class="reference external" href="https://hub.docker.com/">DockerHub</a></p></li>
<li><p>create a repository with a name matching your GitHub repository</p></li>
<li><p>click on your profile in the top right and select <code class="docutils literal notranslate"><span class="pre">my</span> <span class="pre">account</span></code></p></li>
<li><p>under <code class="docutils literal notranslate"><span class="pre">security</span></code> click <code class="docutils literal notranslate"><span class="pre">create</span> <span class="pre">new</span> <span class="pre">access</span> <span class="pre">token</span></code></p>
<ul>
<li><p>the name of the access token should ideally also match the name of your Github repository (best practice, not a requirement)</p></li>
<li><p>grant read, write and delete permissions and click on generate</p></li>
</ul>
</li>
<li><p>a new dialogue box will pop-up, copy the displayed access token and temporally save it somewhere, as you will not be able to view this token again later</p></li>
</ul>
<p><img alt="new_access_token" src="../_images/new_access_token.png" /></p>
</section>
<section id="setup-github-secrets">
<h2>3. Setup GitHub secrets<a class="headerlink" href="#setup-github-secrets" title="Link to this heading">#</a></h2>
<p>For authentification purposes, i.e. to connect our DockerHub and GitHub, we will need to store our newly generated <code class="docutils literal notranslate"><span class="pre">access</span> <span class="pre">token</span></code>, as well as our DockerHub <code class="docutils literal notranslate"><span class="pre">username</span></code> using GitHub Secrets. These allow us to store sensitive information (API keys, passwords etc.) necessary to enable automatization without exposing that information to the public.</p>
<ul class="simple">
<li><p>head to your GitHub repository</p></li>
<li><p>click on <code class="docutils literal notranslate"><span class="pre">settings</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">secrets</span> <span class="pre">and</span> <span class="pre">variables</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code></p></li>
<li><p>next, we will create two new GitHub “secrets”</p>
<ul>
<li><p>click on <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">repository</span> <span class="pre">secret</span></code> and enter the name <code class="docutils literal notranslate"><span class="pre">DOCKERHUB_USERNAME</span></code></p>
<ul>
<li><p>under the <code class="docutils literal notranslate"><span class="pre">secret</span></code> heading add your DockerHub Username</p></li>
</ul>
</li>
<li><p>click on <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">repository</span> <span class="pre">secret</span></code> and enter the name <code class="docutils literal notranslate"><span class="pre">DOCKERHUB_TOKEN</span></code></p>
<ul>
<li><p>under the <code class="docutils literal notranslate"><span class="pre">secret</span></code> heading add the <code class="docutils literal notranslate"><span class="pre">DockerHub</span> <span class="pre">access</span> <span class="pre">token</span></code> from the previous step</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img alt="actions_secrets" src="../_images/actions_secrets.png" /></p>
</section>
<section id="setup-the-github-workflow">
<h2>4. Setup the Github workflow<a class="headerlink" href="#setup-the-github-workflow" title="Link to this heading">#</a></h2>
<p>Now it’s time to create our GitHub workflow file. For this we will create a <code class="docutils literal notranslate"><span class="pre">.yml</span> <span class="pre">file</span></code> that contains all the necessary instructions to build our image and to transfer it to our DockerHub registry.</p>
<ul class="simple">
<li><p>go to your GitHub repo, create a new file called  <code class="docutils literal notranslate"><span class="pre">.github/workflows/container_build_publish.yml</span></code></p></li>
<li><p>copy and paste the following code into the file</p>
<ul>
<li><p>make sure to replace the line under tags <code class="docutils literal notranslate"><span class="pre">yourhubusername/yourimagename:latest</span></code> with your data</p></li>
</ul>
</li>
</ul>
<br>
<br>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
 name: Build and Publish Container

 on:
 # run it on push to the default repository branch
 push:
     branches: [main]
 # run it during pull request
 pull_request:

 jobs:
 # define job to build and publish docker image
 build-and-push-docker-image:
     name: Build Docker image and push to repositories
     # run only when code is compiling and tests are passing
     runs-on: ubuntu-latest

     # steps to perform in job
     steps:
     - name: Checkout code
         uses: actions/checkout@v3

     # setup Docker build action
     - name: Set up Docker Buildx
         id: buildx
         uses: docker/setup-buildx-action@v2

     - name: Login to DockerHub
         uses: docker/login-action@v2
         with:
         username: ${{ secrets.DOCKERHUB_USERNAME }}
         password: ${{ secrets.DOCKERHUB_TOKEN }}

     - name: Login to Github Packages
         uses: docker/login-action@v2
         with:
         username: ${{ github.actor }}
         password: ${{ secrets.GITHUB_TOKEN }}
     
     - name: Build image and push to Docker Hub and GitHub Container Registry
         uses: docker/build-push-action@v2
         with:
         # relative path to the place where source code with Dockerfile is located
         context: ./
         # Note: tags has to be all lower-case
         tags: |
             `yourhubusername/yourimagename:latest` 
         # build on feature branches, push only on main branch
         push: ${{ github.ref == &#39;refs/heads/main&#39; }}

     - name: Image digest
         run: echo ${{ steps.docker_build.outputs.digest }}

</pre></div>
</div>
</section>
<section id="check-your-github-action-settings">
<h2>5. Check your GitHub action settings<a class="headerlink" href="#check-your-github-action-settings" title="Link to this heading">#</a></h2>
<p>Now we make sure that the settings of our GitHub repository allow for our workflows to read/write and push files to our DockerHub.</p>
<ul class="simple">
<li><p>in your GitHub repo, click <code class="docutils literal notranslate"><span class="pre">settings</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">general</span></code></p></li>
<li><p>make sure that</p>
<ul>
<li><p>under <code class="docutils literal notranslate"><span class="pre">Action</span> <span class="pre">permissions</span></code> you’ve selected <code class="docutils literal notranslate"><span class="pre">Allow</span> <span class="pre">all</span> <span class="pre">actions</span> <span class="pre">and</span> <span class="pre">reusable</span> <span class="pre">workflows</span></code></p></li>
</ul>
</li>
</ul>
<p><img alt="actions_permissions" src="../_images/actions_permissions.png" /></p>
<ul class="simple">
<li><p>under <code class="docutils literal notranslate"><span class="pre">Workflow</span> <span class="pre">permissions</span></code> you’ve selected <code class="docutils literal notranslate"><span class="pre">Read</span> <span class="pre">and</span> <span class="pre">write</span> <span class="pre">permissions</span></code> and <code class="docutils literal notranslate"><span class="pre">Allow</span> <span class="pre">GitHub</span> <span class="pre">Actions</span> <span class="pre">to</span> <span class="pre">create</span> <span class="pre">and</span> <span class="pre">approve</span> <span class="pre">pull</span> <span class="pre">requests</span></code></p></li>
</ul>
<p><img alt="workflow_permissions" src="../_images/workflow_permissions.png" /></p>
</section>
<section id="start-the-actions-workflow">
<h2>6. Start the actions workflow<a class="headerlink" href="#start-the-actions-workflow" title="Link to this heading">#</a></h2>
<p>Every consecutive push or commit to the main branch of this GitHub repository will now trigger a new build, hence your Docker container remains nicely up to date without any additional effort.</p>
<ul class="simple">
<li><p>to test if your workflow works we therefore can simply commit or push a change, i.e.</p>
<ul>
<li><p>update a file online, e.g. you could add or update the <code class="docutils literal notranslate"><span class="pre">README</span></code> file of your repo</p></li>
<li><p>push a change from your local machine to your online repo</p></li>
</ul>
</li>
<li><p>Following go to the <code class="docutils literal notranslate"><span class="pre">actions</span></code> section of your GitHub repository</p>
<ul>
<li><p>under workflow runs you should see either the current workflow still running or see the previous runs</p>
<ul>
<li><p>a green checkmark indicates that your workflow has run successfully, a red cross that the workflow failed</p></li>
<li><p>in either case you can click on the workflow in question to get more info (e.g. to check what went wrong)</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img alt="workflows" src="../_images/workflows.png" /></p>
<br>
<br>
<ul class="simple">
<li><p>If you check back on DockerHub, you should now see your updated Docker image</p></li>
</ul>
<p><img alt="docker_image_uploaded" src="../_images/docker_image_uploaded.png" /></p>
</section>
<section id="celebrate">
<h2>7. Celebrate<a class="headerlink" href="#celebrate" title="Link to this heading">#</a></h2>
<p><img alt="Lord of the rings It's done! Gif" src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExY2d2aXZ2dTlzaHpmdjN5ZjA1NWZtMTFtMXRla2w1Zm90cTA2NTdvMiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3oKIPf3C7HqqYBVcCk/giphy.gif" /></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./advanced"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="creating_your_own.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Creating your own software container</p>
      </div>
    </a>
    <a class="right-next"
       href="../CoC.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Code of Conduct</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#automating-builds-using-github">Automating builds using Github</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">1. Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-a-dockerhub-access-token">2. Generate a DockerHub access token</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-github-secrets">3. Setup GitHub secrets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-the-github-workflow">4. Setup the Github workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-your-github-action-settings">5. Check your GitHub action settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#start-the-actions-workflow">6. Start the actions workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#celebrate">7. Celebrate</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Peer Herholz
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2018.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>